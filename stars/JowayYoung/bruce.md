---
project: bruce
stars: 69
description: ğŸ”¥ Bruce FEES ä¸€å¥—å¤šåŠŸèƒ½å‰ç«¯å·¥ç¨‹åŒ–å¤šåŒ…ç®¡ç†å®è·µæ–¹æ¡ˆ ğŸ“¦
url: https://github.com/JowayYoung/bruce
---

Bruce
-----

è¯·æŸ¥çœ‹Bruce FEESçš„æ–‡æ¡£

### å¼€å‘è®¡åˆ’

-   **@yangzw/bruce-app**ï¼šåº”ç”¨`@1.3.7`âœ”ï¸
-   **@yangzw/bruce-ico**ï¼šå›¾æ ‡`@1.3.7`
-   **@yangzw/bruce-img**ï¼šå›¾åƒ`@1.3.7`âœ”ï¸
-   **@yangzw/bruce-lng**ï¼šè¯­è¨€`@1.3.7`
-   **@yangzw/bruce-pkg**ï¼šæ¨¡å—`@1.3.7`âœ”ï¸
-   **@yangzw/bruce-std**ï¼šè§„èŒƒ`@1.3.7`âœ”ï¸
-   **@yangzw/bruce-ui**ï¼šç»„ä»¶`@1.3.7`
-   **@yangzw/bruce-us**ï¼šå·¥å…·`@1.3.7`âœ”ï¸

### è‰²å½©å®šä¹‰

-   **redBright**ï¼šé”™è¯¯ã€ä¸»é¢˜
-   **yellowBright**ï¼šè­¦å‘Šã€é“¾æ¥ã€åŠ è½½
-   **blueBright**ï¼šè¯´æ˜ã€è·¯å¾„ã€åç§°
-   **greenBright**ï¼šæˆåŠŸã€å‘½ä»¤

### é—®é¢˜æ¸…å•

-   `bruce-pkg`ä¾èµ–çš„`listr2`ç›®å‰æœªå‡çº§åˆ°`v7`ï¼Œ`v7`å­˜åœ¨æ— æ³•æŠ›å‡ºé”™è¯¯çš„é—®é¢˜ï¼Œä½†æ˜¯`v6`éœ€è¦æ˜¾å¼ä¾èµ–`enquirer`
-   `vite`ä»`v4`è¿ç§»åˆ°`v5`çš„æ³¨æ„äº‹é¡¹
-   `stylelint`ä»`v15`è¿ç§»åˆ°`v16`çš„æ³¨æ„äº‹é¡¹
-   `app/ico/img/std`éœ€è¦å»æ‰`tsconfig.json`çš„`"skipLibCheck":true`é…ç½®
-   `app`çš„`sass`å’Œ`sass-loader@14`å­˜åœ¨ç‰ˆæœ¬å…¼å®¹å†²çªï¼Œ`sass-loader`é™çº§åˆ°`v13`
-   `img`çš„`imagemin-svgo@11`å­˜åœ¨`is-svg`é”™è¯¯ï¼Œé™çº§åˆ°`v10`
-   `std`çš„`eslint-config-love`åªèƒ½åœç•™åœ¨`v47`ï¼Œéœ€è¦`eslint`å‡çº§åˆ°`v9`æ‰èƒ½ä½¿ç”¨`v52`(ç›´æ¥ç§»é™¤)
-   `std`çš„`typescript-eslint`åªèƒ½åœç•™åœ¨`v7`ï¼Œéœ€è¦`eslint`å‡çº§åˆ°`v9`æ‰èƒ½ä½¿ç”¨`v8`

### æŒ‡ä»¤æ­¥éª¤

-   é‡å»ºæºç (0)ï¼š`npm run rebuild`(ä¸åŒ…æ‹¬`publish/upgrade`)
-   æ¸…ç©ºç¼“å­˜(1)ï¼š`npm run clean`
-   åˆå§‹é¡¹ç›®(2)ï¼š`npm run init`
-   æ„å»ºæºç (3)ï¼š`npm run build`
-   å‹ç¼©æºç (4)ï¼š`npm run mini`
-   æŒ‚è½½æºç (5)ï¼š`npm run link`
-   æäº¤æºç (6)ï¼š`npm run commit`
-   å‘å¸ƒæºç (7)ï¼š`npm run publish`
-   å‘å¸ƒæºç (8)ï¼š`npm run upgrade`
-   æ„å»ºæºç (å•åŒ…)ï¼š`pnpm -F @yangzw/bruce-std run build`
-   è°ƒè¯•æºç (å•åŒ…)ï¼š`pnpm -F @yangzw/bruce-std run dev`
-   å¢åŠ ä¾èµ–(å•åŒ…)ï¼š`pnpm -F @yangzw/bruce-ui add bootstrap-icons`
-   åˆ é™¤ä¾èµ–(å•åŒ…)ï¼š`pnpm -F @yangzw/bruce-ui remove bootstrap-icons`
-   å‘å¸ƒæ¨¡å—(å•åŒ…)ï¼š`pnpm -reg https://registry.npmjs.org/ -F @yangzw/bruce-us --no-git-checks publish`

### å¼€å‘ç»†èŠ‚

#### yarnè°ƒè¯•é—®é¢˜

æ•´ä¸ªé¡¹ç›®ä½¿ç”¨`yarn`è¿›è¡Œè°ƒè¯•ï¼Œ`yarn`å®‰è£…ä¹‹åå†é…ç½®`bin/prefix/cacheç›®å½•`ã€‚**Windows**å’Œ**MacOS**åŒç†ï¼Œä»¥`MacOS`ä¸ºä¾‹ã€‚

æ‰¾åˆ°`bin/prefix/cacheç›®å½•`å¹¶æ‰‹åŠ¨åˆ é™¤ï¼ŒåŒæ—¶ä¿ç•™é…ç½®æ–‡ä»¶`/usr/local/share/.yarnrc`ã€‚

# è·å–binç›®å½•ï¼š/usr/local/bin
yarn global bin

# è·å–prefixç›®å½•ï¼š/usr/local/share/.config/yarn/global
yarn global dir

# è·å–cacheç›®å½•ï¼š/usr/local/share/Library/Caches/Yarn
yarn cache bin

è¿ç§»`bin/prefix/cacheç›®å½•`åˆ°æŒ‡å®šä½ç½®ï¼Œ`binç›®å½•`è¦åœ¨`prefixç›®å½•`ä¸­ï¼Œ`prefixç›®å½•`å’Œ`cacheç›®å½•`è¦åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­ã€‚å…¶ä¸­`path`ä¸º`/Users/yangzw/Documents/è®°å½•/Yarn`ã€‚

# è®¾ç½®binç›®å½•
yarn config set prefix path/prefix/bin

# è®¾ç½®prefixç›®å½•
yarn config set global-folder path/prefix

# è®¾ç½®cacheç›®å½•
yarn config set cache-folder path/cache

å°†`binç›®å½•`å¢åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œé‡å¯é…ç½®æ–‡ä»¶ä½¿å®ƒç”Ÿæ•ˆã€‚

# è¿›å…¥é…ç½®æ–‡ä»¶
vim ~/.bash\_profile

# åœ¨.bash\_profileä¸­å®šä¹‰ç¯å¢ƒå˜é‡
export PATH=$PATH:\`yarn global bin\`

# é‡å¯é…ç½®æ–‡ä»¶
source ~/.bash\_profile

æ‰§è¡Œ`yarn global add pkg`å®‰è£…æ¨¡å—å¹¶æµ‹è¯•å®ƒèƒ½å¦åœ¨å…¨å±€ç¯å¢ƒä¸­ä½¿ç”¨ã€‚

yarn global add typescript
tsc -v

è°ƒè¯•èŒƒå›´æ¨¡å—æ—¶æ‰§è¡Œ`yarn link`å°†å®ƒæŒ‚è½½åˆ°`~/.config/yarn/link`ï¼Œä½†æ˜¯ä¸Šè¿°é…ç½®å·²ç»æ”¹å˜`bin/prefix/cacheç›®å½•`ï¼Œæ‰€ä»¥è¦æ‰§è¡Œ`yarn link --link-folder path`å°†å®ƒæŒ‡å®šåˆ°`binç›®å½•`ä¸­ã€‚

# è¿›å…¥ç›®å½•
cd pkg
# é“¾æ¥æŒ‡ä»¤
yarn link --link-folder path/prefix/bin
# è§£é™¤æŒ‡ä»¤
yarn unlink --link-folder path/prefix/bin

#### sharpå®‰è£…é—®é¢˜

è®¾ç½®`sharpé•œåƒ`æŒ‡å‘åˆ°æ·˜å®é•œåƒã€‚

npm config set sharp\_binary\_host https://npm.taobao.org/mirrors/sharp/
npm config set sharp\_dist\_base\_url https://npm.taobao.org/mirrors/sharp-libvips/
npm config set sharp\_libvips\_binary\_host https://npm.taobao.org/mirrors/sharp-libvips/

å‰å¾€sharp-libvipsæ‰‹åŠ¨ä¸‹è½½å‹ç¼©åŒ…ï¼Œå°†å®ƒæ”¾ç½®åˆ°`npm config get cache`è·å–ç›®å½•çš„`_libvipsæ–‡ä»¶å¤¹`ä¸­ã€‚

-   **Windows**é€‰æ‹©`win32-x64.tar.br`æˆ–`win32-x64.tar.gz`ä¸‹è½½
-   **MacOS**é€‰æ‹©`darwin-x64.tar.br`ä¸‹è½½
-   **Linux**é€‰æ‹©`linux-x64.tar.br`ä¸‹è½½

#### ä½¿ç”¨TSå¼€å‘å…·å¤‡binå‘½ä»¤çš„Npmæ¨¡å—

é¦–å…ˆï¼Œé…ç½®`tsconfig.jsonæ–‡ä»¶`ï¼Œè¿™äº›å­—æ®µå¿…é¡»é…ç½®ã€‚

-   **allowJs**ï¼šå…è®¸ç¼–è¯‘å™¨ç¼–è¯‘JSæ–‡ä»¶
-   **allowSyntheticDefaultImports**ï¼šå…è®¸å¯¼å…¥æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—æ—¶ï¼Œç¼–è¯‘å™¨ç”Ÿæˆé»˜è®¤å¯¼å‡º
-   **baseUrl**ï¼šç›¸å¯¹å¯¼å…¥çš„åŸºå‡†è·¯å¾„
-   **downlevelIteration**ï¼šå°†`for-of`ç¼–è¯‘ä¸ºES5å…¼å®¹çš„ä»£ç 
-   **esModuleInterop**ï¼šå…è®¸å¯¼å…¥CJSæ¨¡å—æ—¶ä½¿ç”¨ESæ¨¡å—çš„è¯­æ³•
-   **experimentalDecorators**ï¼šå…è®¸ä½¿ç”¨å®éªŒæ€§çš„è£…é¥°å™¨è¯­æ³•
-   **forceConsistentCasingInFileNames**ï¼šå¼ºåˆ¶æ–‡ä»¶åç§°å¤§å°å†™ä¸€è‡´
-   **jsx**ï¼šJSXç¼–è¯‘æ–¹å¼
-   **lib**ï¼šç¼–è¯‘ä¹‹åçš„å¯ç”¨åº“
-   **module**ï¼šç¼–è¯‘ä¹‹åçš„æ¨¡å—è§„èŒƒ
-   **moduleResolution**ï¼šæ¨¡å—è§£ææ–¹å¼
-   **outDir**ï¼šè¾“å‡ºç›®å½•
-   **paths**ï¼šå®šä¹‰æ–‡ä»¶è·¯å¾„å¿«æ·æ–¹å¼(åœ¨Pnpmé¡¹ç›®ä¸­æ— æ³•ä½¿ç”¨)
-   **removeComments**ï¼šåˆ é™¤ä»£ç æ³¨é‡Š
-   **resolveJsonModule**ï¼šå…è®¸å¯¼å…¥JSONæ–‡ä»¶
-   **rootDir**ï¼šæºç ç›®å½•(å¯é€‰)
-   **skipLibCheck**ï¼šè·³è¿‡é”™è¯¯ç±»å‹æ£€æŸ¥(å¯é€‰ï¼Œåœ¨ç¼–è¯‘æ—¶é‡åˆ°ç±»å‹ä¸é€šè¿‡å¯ç”¨è¿™ä¸ªé€‰é¡¹è·³è¿‡æ£€æŸ¥)
-   **sourceMap**ï¼šç”ŸæˆSourceMapæ–‡ä»¶
-   **strict**ï¼šå¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹çš„æ£€æŸ¥
-   **target**ï¼šç¼–è¯‘ä¹‹åçš„ä»£ç éœ€è¦æ”¯æŒECMAScriptçš„ç‰ˆæœ¬
-   **exclude**ï¼šæ’é™¤æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•
-   **include**ï¼šåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•

{
	"compilerOptions": {
		"allowJs": true,
		"allowSyntheticDefaultImports": true,
		"baseUrl": ".",
		"downlevelIteration": true,
		"esModuleInterop": true,
		"experimentalDecorators": true,
		"forceConsistentCasingInFileNames": true,
		"jsx": "preserve",
		"lib": \[
			"DOM",
			"DOM.Iterable",
			"ES2015",
			"ES2016",
			"ES2017",
			"ES2018",
			"ES2019",
			"ES2020",
			"ES2021",
			"ES2022",
			"ES2023",
			"ES2024",
			"ESNext"
		\],
		"module": "ESNext",
		"moduleResolution": "node",
		"outDir": "dist",
		"paths": {
			"@/\*": \[
				"src/\*"
			\]
		},
		"removeComments": true,
		"resolveJsonModule": true,
		"sourceMap": false,
		"strict": true,
		"target": "ES6"
	},
	"exclude": \[
		"node\_modules"
	\],
	"include": \[
		"src"
	\]
}

ç„¶åï¼Œé…ç½®`package.jsonæ–‡ä»¶`ã€‚ä¸ºäº†è®©TSç¼–è¯‘å‡ºæ¥çš„JSèƒ½åœ¨`Node`çš„`ESM`æ¨¡å—è§„èŒƒçš„ç¯å¢ƒä¸­è¿è¡Œï¼Œéœ€è¦å¯¹è¿™äº›å­—æ®µè¿›è¡Œé…ç½®ã€‚

-   **bin**: æ¨¡å—çš„CMDå·¥å…·ï¼Œå½“æ¨¡å—è¢«å¯¼å…¥æ—¶ï¼Œä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶
-   **main**: æ¨¡å—çš„å…¥å£æ–‡ä»¶ï¼Œå½“æ¨¡å—è¢«å®‰è£…æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¿™ä¸ªå­—æ®µä¸­æŒ‡å®šå‘½ä»¤å¢åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­
-   **type**: æ¨¡å—è§„èŒƒ

åŒæ—¶è¿˜è¦ä¸ºCMDå·¥å…·æä¾›è°ƒè¯•ç¯å¢ƒã€‚ä½¿ç”¨`nodemon`ç›‘å¬`srcç›®å½•`ã€`tsconfig.json`å’Œ`package.json`ï¼Œå½“è¿™äº›æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°ç¼–è¯‘å’Œæ‰“åŒ…TSä¸ºJSï¼Œé€šè¿‡`npm link`å°†æ¨¡å—é“¾æ¥åˆ°å…¨å±€ç¯å¢ƒä¸­ï¼Œä¸ºå‘½ä»¤æä¾›å…¨å±€çš„è°ƒè¯•å’Œè°ƒç”¨ã€‚

{
	"type": "module",
	"main": "dist/index.js",
	"bin": {
		"bruce-pkg": "dist/index.js"
	},
	"scripts": {
		"build": "rimraf dist && tsc -p tsconfig.json && npm link",
		"dev": "nodemon -w src -w package.json -w tsconfig.json -e ts -x \\"npm run build\\""
	}
}

è°ƒè¯•æ—¶æ‰§è¡Œ`pnpm run -F @yangzw/bruce-pkg dev`ã€‚å…·ä½“æ¥è¯´ï¼Œå‘½ä»¤ä¸­æ¯ä¸ªå‚æ•°çš„ä½œç”¨å¦‚ä¸‹ã€‚

-   **\-w**ï¼šå…¨å†™ä¸º`--watch`ï¼Œç›‘å¬æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„å˜åŒ–ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªç›®æ ‡ï¼Œå°±ç”¨å¤šä¸ª`-w`ç›‘å¬
-   **\-e**ï¼šå…¨å†™ä¸º`--ext`ï¼Œç›‘å¬æ–‡ä»¶åç¼€ï¼Œå¦‚æœå­˜åœ¨å¤šç§æ–‡ä»¶ï¼Œå°±ç”¨é€—å·éš”å¼€
-   **\-x**ï¼šå…¨å†™ä¸º`--exec`ï¼Œæ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œéœ€è¦ä½¿ç”¨ä¸¤ä¸ª`\"`åŒ…è£¹å‘½ä»¤

æœ€åï¼Œè§„èŒƒ`ts/tsxæ–‡ä»¶`çš„ç¼–å†™ã€‚å‚è€ƒæ–‡æ¡£1å’Œæ–‡æ¡£2ã€‚

æ ¹æ®TSæ¨¡å—è§£å†³æ–¹æ¡ˆè§„åˆ™ï¼Œ`ts/tsxæ–‡ä»¶`çš„åç¼€ä¸åº”è¯¥åœ¨å¯¼å…¥TSæ–‡ä»¶æ—¶ä½¿ç”¨ã€‚ç›¸åï¼Œè¦ä¹ˆä½¿ç”¨`js/jsx`çš„æ–‡ä»¶åç¼€ï¼Œè¦ä¹ˆå®Œå…¨çœç•¥æ–‡ä»¶åç¼€ã€‚

import { getUser } from "./user.js"; // user.ts
import MyComponent from "./component"; // component.tsx

#### Macç”µè„‘æƒé™é—®é¢˜

åœ¨æ‰§è¡Œ`npm run link`ä¹‹åï¼Œç”Ÿæˆçš„æ–‡ä»¶ä¼šå­˜åœ¨æƒé™é—®é¢˜ï¼Œéœ€è¦å¼€é€šè¯»å†™æƒé™ã€‚

chmod +x /Users/yangzw/Documents/è®°å½•/Nvm/versions/node/v22.14.0/bin/bruce-app
chmod +x /Users/yangzw/Documents/è®°å½•/Nvm/versions/node/v22.14.0/bin/bruce-ico
chmod +x /Users/yangzw/Documents/è®°å½•/Nvm/versions/node/v22.14.0/bin/bruce-img
chmod +x /Users/yangzw/Documents/è®°å½•/Nvm/versions/node/v22.14.0/bin/bruce-lng
chmod +x /Users/yangzw/Documents/è®°å½•/Nvm/versions/node/v22.14.0/bin/bruce-pkg
chmod +x /Users/yangzw/Documents/è®°å½•/Nvm/versions/node/v22.14.0/bin/bruce-std

åœ¨æ£€æŸ¥`package.jsonæ–‡ä»¶`æ—¶ï¼Œ`Version Lens`å¯èƒ½æ— æƒè¯»å–`node_modules`æ–‡ä»¶å¤¹çš„ç¼“å­˜ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¸…ç†ç¼“å­˜ã€‚

npm cache clean -f
